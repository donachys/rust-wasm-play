<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Simple template</title>
  </head>
  <body>
    <script>
        fetch('fractals.wasm').then(response =>
          response.arrayBuffer()
        ).then(bytes =>
          WebAssembly.instantiate(bytes)
        ).then(function(results) {
          console.log('example()', results.instance.exports.example());

          const linearMemory = results.instance.exports.memory;
          const offset = results.instance.exports.hello();
          const stringBuffer = new Uint8Array(linearMemory.buffer, offset);
          let str = '';
          for (let i = 0; i < stringBuffer.length && stringBuffer[i] != 0; i++) {
            str += String.fromCharCode(stringBuffer[i]);
          }
          console.log(str);
        });
    </script>
  </body>
</html>

